**EVALUATION KIT AVAILABLE**


_Click_ _**[here](https://www.maximintegrated.com/en/storefront/storefront.html)**_ _for production status of specific part numbers._

# **MAX17261 5.1μA Multi-Cell Fuel Gauge** **with ModelGauge m5 EZ**



**General Description**


The MAX17261 is an ultra-low power fuel gauge IC which
implements the Maxim ModelGauge™m5 algorithm. The
IC monitors a multiple-series cell battery pack with an external resistor divider.


The ModelGauge m5 EZ algorithm makes fuel gauge implementation easy by eliminating battery characterization
requirements and simplifying host software interaction. The algorithm provides tolerance against battery diversity for most lithium batteries and applications.


The algorithm combines the short-term accuracy and linearity of a coulomb counter with the long-term stability of
a voltage-based fuel gauge, along with temperature compensation to provide industry-leading fuel gauge accuracy. The IC automatically compensates for cell-aging, temperature, discharge rate, and provides accurate state-ofcharge (SOC) in percentage (%) and remaining capacity
in milliampere-hours (mAh) over a wide range of operating conditions. As the battery approaches the critical region near empty, the algorithm invokes a special correction mechanism that eliminates any error. The IC provides
accurate estimation of time-to-empty and time-to-full and
provides three methods for reporting the age of the battery: reduction in capacity, increase in battery resistance,
and cycle odometer.


The IC provides precision measurements of current, voltage, and temperature. The temperature of the battery
pack is measured using an internal temperature sensor or
external thermistor. A 2-wire I [2] C interface provides access
to data and control registers. The IC is available in a tiny
lead-free 0.4mm pitch, 1.5mm x 1.5mm, 9-pin WLP package and 3mm x 3mm, 14-pin TDFN package.


**Applications**


- Tablets, 2-in-1 Laptops

- Digital Still, Video, and Action Cameras

- Medical Devices

- Handheld Computers and Terminals

- Financial Terminals

- Mobile Printers

- Augmented/Virtual Reality Devices

- Robots

- E-Bikes

- Battery Backups

- Wireless Speakers


_ModelGauge is a trademark of Maxim Integrated Products, Inc._


_19-100318; Rev 0; 5/18_



**Benefits and Features**


- ModelGauge m5 EZ

  - No Characterization Required for EZ Performance

  - Robust Against Battery Variation

  - Eliminates Error Near Empty Voltage

  - Eliminates Coulomb Counter Drift

  - Compensates for Age, Current, and Temperature

  - Does Not Require Empty, Full, or Idle States


- Low 5.1μA Operating Current

- Monitors Multiple-Cell Battery Pack

- Wide Sense Resistor Range: 1mΩ to 1000mΩ

- PCB Metal Sensing + Temperature Compensation

- Supports Li+ and Variants Including LiFePO 4

- Thermistor or ±1°C Internal Temperature

- Dynamic Power Estimates Power Capability During
Discharge

- Time-to-Empty and Time-to-Full Estimation

- Predicts Remaining Capacity Under Theoretical Load

- No Calibration Required

- Alert Indicator for Voltage, SOC, Temperature,
Current and 1% SOC Change


_**Ordering Information**_ _**appears at end of data sheet.**_


**Simple Fuel Gauge Circuit Diagram**








|3~5V|Col2|
|---|---|
|REG||
















# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

TABLE OF CONTENTS


General Description. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1


Applications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1


Benefits and Features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1


Simple Fuel Gauge Circuit Diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1


Absolute Maximum Ratings. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6


Package Information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6


WLP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6


TDFN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6


Electrical Characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7


Typical Operating Characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9


Pin Configurations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11


TDFN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11


WLP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11


Pin Descriptions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12


Functional Diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13


Detailed Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14


ModelGauge m5 EZ Performance . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14


Application Notes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15


Standard Register Formats. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15


ModelGauge m5 EZ Configuration Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16


DesignCap Register (18h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16


VEmpty Register (3Ah). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16


ModelCfg Register (DBh) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17


IChgTerm Register (1Eh) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17


Config Register (1Dh) and Config2 Register (BBh) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17


ModelGauge m5 EZ Algorithm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19


ModelGauge m5 Algorithm Output Registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20


RepCap Register (05h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20


RepSOC Register (06h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21


FullCapRep Register (10h). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21


TTE Register (11h). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21


TTF Register (20h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21


Cycles Register (17h). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21


Status Register (00h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21


Analog Measurements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22


Voltage Measurement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22


VCell Register (09h). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22


www.maximintegrated.com Maxim Integrated | 2


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

TABLE OF CONTENTS (CONTINUED)


AvgVCell Register (19h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22


MaxMinVolt Register (1Bh) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22


Current Measurement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23


Current Register (0Ah). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23


AvgCurrent Register (0Bh). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23


MaxMinCurr Register (1Ch). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23


Temperature Measurement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24


Temp Register (08h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24


AvgTA Register (16h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24


MaxMinTemp Register (1Ah). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24


DieTemp Register (034h). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25


Power Register (B1h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25


AvgPower Register (B3h). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25


Alert Function . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25


VAlrtTh Register (01h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25


TAlrtTh Register (02h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26


SAlrtTh Register (03h) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26


IAlrtTh Register (B4h). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26


Serial Number Feature . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27


ModelGauge m5 Memory Space . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27


Layout Guidelines . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28


Typical Application Circuits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30


Ordering Information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31


Revision History . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32


www.maximintegrated.com Maxim Integrated | 3


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

LIST OF FIGURES


Figure 1. ModelGauge m5 EZ Configuration Performance . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15


Figure 2. ModelGauge m5 EZ Algorithm. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20


Figure 3. MAX17261 Layout Guide . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29


Figure 4. Low-Side Current Measurement Typical Applications Circuit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30


Figure 5. Multiple-Series Battery Typical Applications Circuit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31


www.maximintegrated.com Maxim Integrated | 4


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

LIST OF TABLES


Table 1. ModelGauge m5 EZ Performance. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14


Table 2. ModelGauge m5 Register Standard Resolutions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15


Table 3. VEmpty (3Ah) Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16


Table 4. ModelCFG (DBh) Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17


Table 5. Config (1Dh) Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17


Table 6. Config2 (BBh) Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18


Table 7. Status (00h) Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21


Table 8. MaxMinVolt (1Bh) Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23


Table 9. Current Measurement Range and Resolution vs. Sense Resistor Value . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23


Table 10. MaxMinCurr (1Ch) Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24


Table 11. MaxMinTemp (1Ah) Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24


Table 12. VAlrtTh (01h) Format. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25


Table 13. TAlrtTh (02h) Format. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26


Table 14. SAlrtTh (03h) Format. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26


Table 15. IAlrtTh (B4h) Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26


Table 16. Serial Number Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27


Table 17. ModelGauge m5 Register Memory Map . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27


www.maximintegrated.com Maxim Integrated | 5


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Absolute Maximum Ratings**



BATT to GND ........................................................... -0.3V to +6V

ALRT to GND ......................................................... -0.3V to +17V

REG to GND.......................................................... -0.3V to +2.2V
TH to GND...............................................-0.3 V to V BATT + 0.3 V
CELLX to GND ..........................................-0.3V to V BATT + 0.3V
CSN to GND..............................................-0.3V to V BATT + 0.3V
CSPL to GND ........................................................ -0.3V to +0.3V

SDA, SCL to GND .................................................... -0.3V to +6V



SW to GND .................................................... -0.3 to V BATT + 0.3
Operating Temperature Range.............................-40°C to +85°C
Junction Temperature.......................................................+150°C
Storage Temperature Range ..............................-55°C to +125°C
Soldering Temperature (reflow) ........................................+260°C
Continuous Source Current for TH ........................................1mA

Continuous Sink Current for SDA, ALRT.............................20mA
Lead Temperature (soldering 10s)....................................+300ºC



_Stresses beyond those listed under “Absolute Maximum Ratings” may cause permanent damage to the device. These are stress ratings only, and functional operation of the device at these_
_or any other conditions beyond those indicated in the operational sections of the specifications is not implied. Exposure to absolute maximum rating conditions for extended periods may_
_affect device reliability._


**Package Information**

|WLP|Col2|
|---|---|
|Package Code|W91G1+2|
|Outline Number|21-100168|
|Land Pattern Number|Refer to _Application Note 1891_|
|**Thermal Resistance, Four-Layer Board:**|**Thermal Resistance, Four-Layer Board:**|
|Junction to Ambient (θJA)|83.98ºC/W|
|Junction to Case (θJC)|NA|


|TDFN|Col2|
|---|---|
|Package Code|T1433+2C|
|Outline Number|21-0137|
|Land Pattern Number|90-0063|
|**Thermal Resistance, Single-Layer Board:**|**Thermal Resistance, Single-Layer Board:**|
|Junction to Ambient (θJA)|54ºC/W|
|Junction to Case (θJC)|8ºC/W|
|**Thermal Resistance, Four-Layer Board:**|**Thermal Resistance, Four-Layer Board:**|
|Junction to Ambient (θJA)|41ºC/W|
|Junction to Case (θJC)|8ºC/W|



For the latest package outline information and land patterns (footprints), go to _[www.maximintegrated.com/packages](http://www.maximintegrated.com/packages)_ . Note that a “+”,
“#”, or “-” in the package code indicates RoHS status only. Package drawings may show a different suffix character, but the drawing
pertains to the package regardless of RoHS status.


Package thermal resistances were obtained using the method described in JEDEC specification JESD51-7, using a four-layer board.
For detailed information on package thermal considerations, refer to _[www.maximintegrated.com/thermal-tutorial](http://www.maximintegrated.com/thermal-tutorial)_ .


www.maximintegrated.com Maxim Integrated | 6


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Electrical Characteristics**


(V BATT = 2.3V to 4.9V, T A = -40ºC to +85ºC, typical value for T A is +25ºC. Limits are 100% tested at T A = +25°C. The operating
temperature range and relevant supply voltage range are guaranteed by design and characterization. Specifications marked "GBD" are
guaranteed by design and not production tested.)




























|PARAMETER|SYMBOL|CONDITIONS|MIN TYP MAX|UNITS|
|---|---|---|---|---|
|**POWER SUPPLY**|**POWER SUPPLY**|**POWER SUPPLY**|**POWER SUPPLY**|**POWER SUPPLY**|
|Supply Voltage|VBATT|(Note 1)|2.3<br>4.9|V|
|Shutdown Supply<br>Current|IDD0|TA ≤ +50ºC|0.5<br>0.9|μA|
|Hibernate Supply<br>Current|IDD1|TA ≤ +50ºC, average current|5.1<br>12|μA|
|Active Supply Current|IDD2|TA ≤ +50ºC, average current not including<br>thermistor measurement current|15<br>30|μA|
|Regulation Voltage|VREG||1.8|V|
|Startup Voltage|VBATTSU||3|V|
|**ANALOG-TO-DIGITAL CONVERSION**|**ANALOG-TO-DIGITAL CONVERSION**|**ANALOG-TO-DIGITAL CONVERSION**|**ANALOG-TO-DIGITAL CONVERSION**|**ANALOG-TO-DIGITAL CONVERSION**|
|CELLX Measurement<br>Error|VXGERR|TA = +25ºC|-0.2<br>+0.2|% of<br>Reading|
|CELLX Measurement<br>Error|VXGERR|-40ºC ≤TA ≤ 85ºC|-0.5<br>+0.5|-0.5<br>+0.5|
|CELLX Measurement<br>Resolution|VXLSB||78.125|μV|
|CELLX Measurement<br>Range|VXFS||0.92<br>2|V|
|Current Measurement<br>Offset Error|IOERR|Long-term average without load current|±1.5|μV|
|Current Measurement<br>Error|IGERR||-1<br>+1|% of<br>Reading|
|Current Measurement<br>Resolution|ILSB||1.5625|μV|
|Current Measurement<br>Range|IFS||±51.2|mV|
|Internal Temperature<br>Measurement Error|TIGERR|-40ºC ≤TA ≤ +85ºC|±1|ºC|
|Internal Temperature<br>Measurement<br>Resolution|TILSB||0.00391|ºC|
|**INPUT / OUTPUT**|**INPUT / OUTPUT**|**INPUT / OUTPUT**|**INPUT / OUTPUT**|**INPUT / OUTPUT**|
|External Thermistance<br>Resistance|REXT10|Config.R100 = 0|10|kΩ|
|External Thermistance<br>Resistance|REXT100|Config.R100 = 1|100|100|
|Output Drive Low,<br>ALRT, SDA|VOL|IOL = 4mA, VBATT = 2.3V|0.4|V|
|Input Logic High, ALRT,<br>SCL, SDA|VIH||1.5|V|
|Input Logic Low, ALRT,<br>SCL, SDA|VIL||0.5|V|
|Battery-Detach<br>Detection Threshold|VDET|Measured as a fraction of VBATT on TH<br>rising|91<br>96.2<br>99|%|



www.maximintegrated.com Maxim Integrated | 7


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Electrical Characteristics (continued)**


(V BATT = 2.3V to 4.9V, T A = -40ºC to +85ºC, typical value for T A is +25ºC. Limits are 100% tested at T A = +25°C. The operating
temperature range and relevant supply voltage range are guaranteed by design and characterization. Specifications marked "GBD" are
guaranteed by design and not production tested.)





























|PARAMETER|SYMBOL|CONDITIONS|MIN TYP MAX|UNITS|
|---|---|---|---|---|
|Battery-Detach<br>Detection Threshold<br>Hysteresis|VDET-HYS|Measured as a fraction of VBATT on TH<br>falling|1|%|
|Battery-Detach<br>Comparator Delay|tTOFF|TH step from 70% to 100% of VBATT<br>(Alrtp = 0, EnAIN = 1, FTHRM = 1)|100|μs|
|**RESISTANCE AND LEAKAGE**|**RESISTANCE AND LEAKAGE**|**RESISTANCE AND LEAKAGE**|**RESISTANCE AND LEAKAGE**|**RESISTANCE AND LEAKAGE**|
|Leakage Current, CSN,<br>ALRT|ILEAK|VALRT < 15V|-1<br>+1|μA|
|Leakage Current,<br>CELLX|ILEAK_CELLX|VCELLX < 2.0V|-60<br>±5<br>+60|nA|
|Input Pulldown Current|IPD|VSDA = 0.4V, VSCL = 0.4V|0.05<br>0.2<br>0.4|μA|
|**2-WIRE INTERFACE**|**2-WIRE INTERFACE**|**2-WIRE INTERFACE**|**2-WIRE INTERFACE**|**2-WIRE INTERFACE**|
|SCL Clock Frequency|fSCL|(Note 2)|0<br>400|kHz|
|Bus Free Time Between<br>a STOP and START<br>Condition|tBUF||1.3|μs|
|Hold Time (Repeated)<br>START Condition|tHD:STA|(Note 3)|0.6|μs|
|Low Period of SCL<br>Clock|tLOW||1.3|μs|
|High Period of SCL<br>Clock|tHIGH||0.6|μs|
|Setup Time for a<br>Repeated START<br>Condition|tSU:STA||0.6|μs|
|Data Hold Time|tHD:DAT|(Notes 4, 5)|0<br>0.9|μs|
|Data Setup Time|tSU:DAT|(Note 4)|100|ns|
|Rise Time of Both SDA<br>and SCL Signals|tR||5<br>300|ns|
|Fall Time of Both SDA<br>and SCL Signals|tF||5<br>300|ns|
|Setup Time for STOP<br>Condition|tSU:STO||0.6|μs|
|Spike Pulse Width<br>Suppressed by Input<br>Filter|tSP|(Note 6)|50|ns|
|Capacitive Load for<br>Each Bus Line|CB|(Note 7)|400|pF|
|SCL, SDA Input<br>Capacitance|CBIN||6|pF|
|**TIMING**|**TIMING**|**TIMING**|**TIMING**|**TIMING**|
|Time-Base Accuracy|tERR|TA = +25°C|-1<br>+1|%|


www.maximintegrated.com Maxim Integrated | 8


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Electrical Characteristics (continued)**


(V BATT = 2.3V to 4.9V, T A = -40ºC to +85ºC, typical value for T A is +25ºC. Limits are 100% tested at T A = +25°C. The operating
temperature range and relevant supply voltage range are guaranteed by design and characterization. Specifications marked "GBD" are
guaranteed by design and not production tested.)

|PARAMETER|SYMBOL|CONDITIONS|MIN TYP MAX|UNITS|
|---|---|---|---|---|
|TH Precharge Time|tPRE||8.48|ms|



**Note 1:** All voltages are referenced to GND.
**Note 2:** Timing must be fast enough to prevent the IC from entering shutdown mode due to bus low for a period greater than the

shutdown timer setting.
**Note 3:** f SCL must meet the minimum clock low time plus the rise/fall times.
**Note 4:** The maximum t HD:DAT has only to be met if the device does not stretch the low period (t LOW ) of the SCL signal.
**Note 5:** This device internally provides a hold time of at least 100ns for the SDA signal (referred to the minimum V IH of the SCL signal)

to bridge the undefined region of the falling edge of SCL.
**Note 6:** Filters on SDA and SCL suppress noise spikes at the input buffers and delay the sampling instant.
**Note 7:** C B represents total capacitance of one bus line in pF.


**Typical Operating Characteristics**


(T A = +25°C, unless otherwise noted.)


www.maximintegrated.com Maxim Integrated | 9


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Typical Operating Characteristics (continued)**


(T A = +25°C, unless otherwise noted.)


www.maximintegrated.com Maxim Integrated | 10


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Pin Configurations**


**TDFN**





















**WLP**



















www.maximintegrated.com Maxim Integrated | 11


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ







|Pin Descriptions|Col2|Col3|Col4|
|---|---|---|---|
|**PIN**|**PIN**|**NAME**|**FUNCTION**|
|**TDFN**|**WLP**|**WLP**|**WLP**|
|2, 4, 5|—|NC|No Connection.|
|1|A1|TH|Thermistor Input. Connect a thermistor from TH to GND. TH also provides battery insertion/<br>removal detection. Connect to BATT if not used.|
|14|A2|SCL|Serial Clock Input. 2-wire clock line. Input only. SCL has an internal pulldown (IPD) for<br>sensing disconnection.|
|13|C1|SDA|Serial Data Input/Output. 2-wire data line. Open-drain output driver. SDA has an internal<br>pulldown (IPD) for sensing disconnection.|
|7|A3|CSN|Sense Resistor Negative Sense Point. Kelvin connect to the system side of the sense<br>resistor.|
|10|C2|CELLX|Voltage Measurement Point for Multiple-Series Cells Application. Connect to an external<br>voltage divider circuit to measure a fraction of the cell voltage.|
|9|—|CSPL|Sense Resistor Positive Sense Point. Kelvin connect to the cell side of the sense resistor.|
|6|B1|BATT|IC Power Supply. Connect to a 3 to 5 volt supply. Bypass with a 0.1μF capacitor to GND.|
|—|C3|GND/<br>CSPL|IC Ground and Sense Resistor Positive Sense Point. Kelvin connect to the cell side of the<br>sense resistor.|
|8|—|GND|IC Ground.|
|11|B3|REG|Internal 1.8V Regulator Output. Bypass with an external 0.47μF capacitor to GND. Do not<br>load externally.|
|12|B2|ALRT|Alert Output. The ALRT pin is an open-drain active-low output which indicates fuel-gauge<br>alerts. Connect to GND if not used.|
|3|—|SW|Gate Switch Signal. Use this pin to control optional FET in resistor divider circuit for low<br>power operation.|


www.maximintegrated.com Maxim Integrated | 12


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Functional Diagram**











































www.maximintegrated.com Maxim Integrated | 13


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Detailed Description**

The MAX17261 is an ultra-low power fuel gauge IC which implements the Maxim ModelGauge m5 EZ algorithm. The IC
measures voltage, current, and temperature accurately to produce fuel gauge results. The ModelGauge m5 EZ robust
algorithm provides tolerance against battery diversity. This additional robustness enables simpler implementation for
most applications and batteries by avoiding time-consuming battery characterization.


The ModelGauge m5 algorithm combines the short-term accuracy and linearity of a coulomb-counter with the long-term
stability of a voltage-based fuel gauge, along with temperature compensation to provide industry-leading fuel gauge
accuracy. The IC automatically compensates for aging, temperature, and discharge rate and provides accurate state of
charge (SOC) in percentage (%) and remaining capacity in milliampere-hours (mAhr) over a wide range of operating
conditions. Fuel gauge error always converges to 0% as the cell approaches empty.


The IC has a register set that is compatible with Intel's DBPT v2 dynamic power standard. This allows the system
designer to safely estimate the maximum allowed CPU turbo-boost power level in complex power conditions. The IC
provides accurate estimation of time-to-empty and time-to-full and provides three methods for reporting the age of the
battery: reduction in capacity, increase in battery resistance, and cycle odometer.


The IC contains a unique serial number. It can be used for cloud-based authentication. See the _Serial Number_
_Feature_ section for more information.


Communication to the host occurs over standard I [2] C interface. For information about I [2] C communication, refer
to the _[User Guide 6597: MAX1726x ModelGauge m5 EZ User Guide](https://www.maximintegrated.com/en/app-notes/index.mvp/id/6597)_ .


**ModelGauge m5 EZ Performance**


ModelGauge m5 EZ performance provides plug-and-play operation when the IC is connected to most lithium batteries.
While the IC can be custom tuned to the application's specific battery through a characterization process for ideal
performance, the IC has the ability to provide good performance for most applications with no custom characterization
required. Table 1 and Figure 1 show the performance of the ModelGauge m5 algorithm in applications using ModelGauge
m5 EZ configuration.


The ModelGauge m5 EZ provides good performance for most cell types. For some chemistries, such as lithium-ironphosphate (LiFePO 4 ) and Panasonic NCR/NCA series cells, it is suggested that the customer request a custom model
from Maxim for best performance.


**Table 1. ModelGauge m5 EZ Performance**

|DESCRIPTION|AFTER FIRST CYCLE* (%)|AFTER SECOND CYCLE* (%)|
|---|---|---|
|Tests with less than 3% error|95|97|
|Tests with less than 5% error|98.7|99|
|Tests with less than 10% error|100|100|



- _Test conditions: +20°C and +40°C, run time of > 3 hours._


www.maximintegrated.com Maxim Integrated | 14


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ








|Col1|50%|Col3|
|---|---|---|
|PERCENTILE OF TESTS (%)<br><br><br><br><br>|||
|PERCENTILE OF TESTS (%)<br><br><br><br><br>|||
|PERCENTILE OF TESTS (%)<br><br><br><br><br>||40%|
|PERCENTILE OF TESTS (%)<br><br><br><br><br>|||
|PERCENTILE OF TESTS (%)<br><br><br><br><br>||30%|
|PERCENTILE OF TESTS (%)<br><br><br><br><br>|||
|PERCENTILE OF TESTS (%)<br><br><br><br><br>||20%|
|PERCENTILE OF TESTS (%)<br><br><br><br><br>|||
|PERCENTILE OF TESTS (%)<br><br><br><br><br>||10%|
|PERCENTILE OF TESTS (%)<br><br><br><br><br>|||


|3|Col2|4|Col4|5|Col6|6|Col8|7|Col10|8|
|---|---|---|---|---|---|---|---|---|---|---|
||WORST CASE ERROR DURING DISCHARGE (%)|WORST CASE ERROR DURING DISCHARGE (%)|WORST CASE ERROR DURING DISCHARGE (%)|WORST CASE ERROR DURING DISCHARGE (%)|WORST CASE ERROR DURING DISCHARGE (%)|WORST CASE ERROR DURING DISCHARGE (%)|WORST CASE ERROR DURING DISCHARGE (%)|WORST CASE ERROR DURING DISCHARGE (%)|WORST CASE ERROR DURING DISCHARGE (%)||



_Figure 1. ModelGauge m5 EZ Configuration Performance_


**Application Notes**


Refer to the following application notes for additional reference material:


- _[User Guide 6597: MAX1726x ModelGauge m5 EZ User Guide](https://www.maximintegrated.com/en/app-notes/index.mvp/id/6597)_

  - Documents full register set

  - More details about ModelGauge m5 algorithm

  - Discusses additional applications


- _[User Guide 6595: MAX1726x Software Implementation Guide](https://www.maximintegrated.com/en/app-notes/index.mvp/id/6595)_

  - Guidelines for software drivers including example code


**Standard Register Formats**


Unless otherwise stated during a given register's description, all IC registers follow the same format depending on the
type of register. See Table 2 for the resolution and range of any register described hereafter. Note that current and
capacity values are displayed as a voltage and must be divided by the sense resistor to determine Amps or Amp-hours.


**Table 2. ModelGauge m5 Register Standard Resolutions**
















|REGISTER<br>TYPE|LSb SIZE|MINIMUM<br>VALUE|MAXIMUM<br>VALUE|NOTES|
|---|---|---|---|---|
|Capacity|5.0μVh/<br>RSENSE|0.0μVh|327.675mVh/<br>RSENSE|Equivalent to 0.5mAh with a 0.010Ω sense resistor.|



www.maximintegrated.com Maxim Integrated | 15


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Table 2. ModelGauge m5 Register Standard Resolutions (continued)**





















|REGISTER<br>TYPE|LSb SIZE|MINIMUM<br>VALUE|MAXIMUM<br>VALUE|NOTES|
|---|---|---|---|---|
|Percentage|1/256%|0.0%|255.9961%|1% LSb when reading only the upper byte.|
|Voltage|78.125μV|0.0V|5.11992V|On per-cell basis.|
|Current|1.5625μV/<br>RSENSE|-51.2mV/<br>RSENSE|51.1984mV/<br>RSENSE|Signed 2's complement format. Equivalent to 156.25μA with a<br>0.010Ω sense resistor.|
|Temperature|1/256°C|-128.0°C|127.996°C|Signed 2's complement format. 1°C LSb when reading only the<br>upper byte.|
|Resistance|1/4096Ω|0.0Ω|15.99976Ω||
|Time|5.625s|0.0s|102.3984h||
|Special||||Format details are included with the register description.|


**ModelGauge m5 EZ Configuration Registers**


The following registers are inputs to the ModelGauge m5 algorithm and store characterization information for the
application cells as well as important application specific parameters. They are described briefly here.


Only the following information is required for configuring ModelGauge m5 EZ:


- Label Capacity—DesignCap

- Empty Voltage—VEmpty

- Charge Termination Current—ICHGTerm


Refer to the _[MAX1726x Software Implementation Guide](https://www.maximintegrated.com/en/app-notes/index.mvp/id/6595)_ for more details on how to initialize the fuel gauge.


**DesignCap Register (18h)**


Register Type: Capacity


Initial value: 0x0BB8


The DesignCap register holds the nominal capacity of the cell.


**VEmpty Register (3Ah)**


Register Type: Special


Initial Value: 0xA561 (3.3V/3.88V)


The VEmpty register sets thresholds related to empty detection during operation. Table 3 shows the register format.


**Table 3. VEmpty (3Ah) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|VE|VE|VE|VE|VE|VE|VE|VE|VE|VR|VR|VR|VR|VR|VR|VR|



**VE:** Empty voltage target, during load. The fuel gauge provides capacity and percentage relative to the empty voltage
target, eventually declaring 0% at VE. A 10mV resolution gives a 0V to 5.11V range. This value defaults to 3.3V after
reset.


**VR:** Recovery voltage. Sets the voltage level for clearing empty detection. Once the cell voltage rises above this point,
empty voltage detection is reenabled. A 40mV resolution gives a 0V to 5.08V range. This value defaults to 3.88V, which
is recommended for most applications.


www.maximintegrated.com Maxim Integrated | 16


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**ModelCfg Register (DBh)**
Register Type: Special


The ModelCFG register controls basic options of the EZ algorithm. Table 4 shows the register format.


**Table 4. ModelCFG (DBh) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|Refresh|0|R100|0|0|VChg|0|0|ModelID|ModelID|ModelID|ModelID|1|0|0|0|



**Refresh:** Set Refresh to 1 to command the model reload. After completion the MAX17261 clears Refresh to 0.


**R100:** if using 100kΩ NTC, set R100 = 1; if using 10kΩ NTC, set R100 = 0.


**0:** Bit must be written 0. Do not write 1.


**1:** Bit must be written 1. Do not write 0.


**ModelID:** Choose from one of the following Lithium models. For the majority of batteries, use ModelID = 0.


ModelID = 0: Use for most lithium cobalt-oxide variants (a large majority of lithium in the market-place). Supported by EZ
without characterization.


ModelID = 2: Use for lithium NCR or NCA cells such as Panasonic. Custom characterization is recommended in this

case.


ModelID = 6: Use for lithium iron-phosphate (LiFePO 4 ). Custom characterization is recommended in this case.


**VChg:** Set VChg to 1 for charge voltage higher than 4.25V (4.3V–4.4V). Set VChg to 0 for 4.2V charge voltage.


**IChgTerm Register (1Eh)**


Register Type: Current


Initial Value: 0x0640 (250mA on 10mΩ)


The IChgTerm register allows the device to detect when charge termination has occurred. Program IChgTerm to the
exact charge termination current used in the application.


Refer to the _End-of-Charge Detection_ section of the _[User Guide 6597: MAX1726x ModelGauge m5 EZ User Guide](https://www.maximintegrated.com/en/app-notes/index.mvp/id/6597)_ for
more details.


**Config Register (1Dh) and Config2 Register (BBh)**


Register Type: Special


Initial Value: 0x2210 for Config, 0x3658 for Config2


The Config registers hold all shutdown enable, alert enable, and temperature enable control bits. Writing a bit location
enables the corresponding function within one task period. Table 5 and Table 6 show the register formats.


**Table 5. Config (1Dh) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|TSel|SS|TS|VS|IS|THSH|Ten|Tex|SHDN|COMMSH|0|ETHRM|FTHRM|Aen|Bei|Ber|



www.maximintegrated.com Maxim Integrated | 17


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Table 6. Config2 (BBh) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|0|0|AtRateEn|DPEn|POWR|POWR|POWR|POWR|dSOCen|TAlrtEn|LDMdl|1|DRCfg|DRCfg|CPMode|0|



**0:** Bit must be written 0. Do not write 1.


**1:** Bit must be written 1. Do not write 0.


**TSEL:** Temperature sensor select. Set to 0 to use internal die temperature. Set to 1 to use temperature information from
thermistor. ETHRM bit must be set to 1 when TSel is 1.


**SS:** SOC ALRT Sticky. When SS = 1, SOC alerts can only be cleared through software. When SS = 0, SOC alerts are
cleared automatically when the threshold is no longer exceeded.


**TS:** Temperature ALRT Sticky. When TS = 1, temperature alerts can only be cleared through software. When TS = 0,
temperature alerts are cleared automatically when the threshold is no longer exceeded.


**VS:** Voltage ALRT Sticky. When VS = 1, voltage alerts can only be cleared through software. When VS = 0, voltage alerts
are cleared automatically when the threshold is no longer exceeded.


**IS:** Current ALRT Sticky. When IS = 1, current alerts can only be cleared through software. When IS = 0, current alerts
are cleared automatically when the threshold is no longer exceeded.


**THSH:** TH Pin Shutdown. Set to 1 to enable device shutdown when the IC is mounted host-side and the battery is
removed. The IC enters shutdown if the TH pin remains high (V TH - V BATT - V DET ) for longer than the timeout of the
ShdnTimer register. This also configures the device to wake up when TH is pulled low with a thermistor on-cell insertion.
Note that if COMMSH and AINSH are both set to 0, the device wakes up on any edge of SDA.


**Ten:** Enable Temperature Channel. Set to 1 and set ETHRM or FTHRM to 1 to enable temperature measurement.


**Tex:** Temperature External. When set to 1, the fuel gauge requires external temperature measurements to be written
from the host. When set to 0, the ICs own measurements are used instead.


**SHDN:** Shutdown. Write this bit to logic 1 to force a shutdown of the device after timeout of the ShdnTimer register
(default 45s delay). SHDN is reset to 0 at power-up and upon exiting shutdown mode. In order to command shutdown
within 45 seconds, first write HibCFG = 0x0000 to enter active mode.


**COMMSH:** Communication Shutdown. Set to logic 1 to force the device to enter shutdown mode if both SDA and SCL
are held low for more than timeout of the ShdnTimer register. This also configures the device to wake up on a rising edge
of any communication. Note that if COMMSH and THSH are both set to 0, the device wakes up on any edge of SDA.
Refer to the _[User Guide 6597: MAX1726x ModelGauge m5 EZ User Guide](https://www.maximintegrated.com/en/app-notes/index.mvp/id/6597)_ for details.


**ETHRM:** Enable Thermistor. Set to logic 1 to enable the TH pin measurement.


**FTHRM:** Force Thermistor Bias Switch. This allows the host to control the bias of the thermistor switch or enable
fast detection of battery removal. Set FTHRM = 1 to always enable the thermistor bias switch. With a standard 10kΩ
thermistor, this adds an additional ~200μA to the current drain of the circuit.


**Aen:** Enable alert on fuel-gauge outputs. When Aen = 1, any violation of the alert threshold register values by
temperature, voltage, current, or SOC triggers an alert. This bit affects the ALRT pin operation only. The Smx, Smn, Tmx,
Tmn, Vmx, Vmn, Imx, and Imn bits of the Status register (000h) are not disabled.


**Bei:** Enable alert on battery insertion when the IC is mounted host-side. When Bei = 1, a battery-insertion condition, as
detected by the TH pin voltage, triggers an alert.


**Ber:** Enable alert on battery removal when the IC is mounted host-side. When Ber = 1, a battery-removal condition, as
detected by the TH pin voltage, triggers an alert.


**AtRateEn:** AtRate enable. When this bit is set to 0, AtRate calculations are disabled and registers AtQResidual/AtTTE/
AtAvSOC/AtAvCap can be used as general purpose memory.


**DPEn:** Dynamic power enable. When this bit is set to 0, Dynamic Power calculations are disabled and registers
MaxPeakPower/SusPeakPower/MPPCurrent/SPPCurrent can be used as general purpose memory.


www.maximintegrated.com Maxim Integrated | 18


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**POWR:** Sets the time constant for the AvgPower register. The default POR value of 0100b gives a time constant of
11.25s. The equation setting the period is:

AvgPower time constant = 45s x 2 [(POWR-6)]


**dSOCen:** SOC Change Alert Enable. Set this bit to 1 to enable alert output with the Status.dSOCi bit function. Write this
bit to 0 to disable alert output with the Status. dSOCi bit. This bit is set to 0 at power-up.


**TAlrten:** Temperature Alert Enable. Set this bit to 1 to enable temperature based alerts. Write this bit to 0 to disable
temperature alerts. This bit is set to 1 at power-up.


**LDMdl:** Host sets this bit to 1 in order to initiate firmware to finish processing a newly loaded model. Firmware clears this
bit to zero to indicate that model loading is finished.


**DRCfg:** Deep relax time configuration. 00 for 0.8 to 1.6 hours, 01 for 1.6 to 3.2 hours, 10 for 3.2 to 6.4 hours and 11 for
6.4 to 12.8 hours.


**CPMode:** Constant-power mode. Set to 1 to enable constant-power mode. If it is set to 0, AtRate/AvgCurrent is used for

AvgVCell
(At)TTE/(At)QResidual/(At)AvSOC/(At)AvCap. If it is set to 1, AtRate/AvgCurrent x (AvgVCell + VEmpty) / 2 [is used for those]

calculations


**ModelGauge m5 EZ Algorithm**
Classical coulomb-counter-based fuel gauges have excellent linearity and short-term performance. However, they suffer
from drift due to the accumulation of the offset error in the current-sense measurement. Although the offset error is often
very small, it cannot be eliminated. It causes the reported capacity error to increase over time and requires periodic
corrections. Corrections are traditionally performed at full or empty. Some other systems also use the relaxed battery
voltage to perform corrections. These systems determine the true state-of-charge (SOC) based on the battery voltage
after a long time of no current flow. Both have the same limitation: if the correction condition is not observed over time in
the actual application, the error in the system is boundless. The performance of classic coulomb counters is dominated by
the accuracy of such corrections. Voltage measurement based SOC estimation has accuracy limitations due to imperfect
cell modeling, but does not accumulate offset error over time.


The IC includes an advanced voltage fuel gauge (VFG) that estimates open-circuit voltage (OCV), even during current
flow, and simulates the nonlinear internal dynamics of a Li+ battery to determine the SOC with improved accuracy. The
model considers the time effects of a battery caused by the chemical reactions and impedance in the battery to determine
SOC. This SOC estimation does not accumulate offset error over time. The IC performs a smart empty compensation
algorithm that automatically compensates for the effect of temperature condition and load condition to provide accurate
state-of-charge information. The converge-to-empty function eliminates error toward empty state. The IC learns battery
capacity over time automatically to improve long-term performance. The age information of the battery is available in the
output registers.


The ModelGauge m5 algorithm combines a high-accuracy coulomb counter with a VFG. See Figure 2. The
complementary combined result eliminates the weaknesses of both the coulomb counter and the VFG while providing
the strengths of both. A mixing algorithm weighs and combines the VFG capacity with the coulomb counter and weighs
each result so that both are used optimally to determine the battery state. In this way, the VFG capacity result is used to
continuously make small adjustments to the battery state, cancelling the coulomb-counter drift.


www.maximintegrated.com Maxim Integrated | 19


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ















_Figure 2. ModelGauge m5 EZ Algorithm_


The ModelGauge m5 algorithm uses this battery state information and accounts for temperature, battery current, age,
and application parameters to determine the remaining capacity available to the system. As the battery approaches the
critical region near empty, the ModelGauge m5 algorithm invokes a special error correction mechanism that eliminates

any error.


The ModelGauge m5 algorithm continually adapts to the cell and application through independent learning routines. As
the cell ages, its change in capacity is monitored and updated and the voltage-fuel-gauge dynamics adapt based on cellvoltage behavior in the application.


For even better fuel-gauging accuracy than ModelGauge m5 EZ, contact Maxim for information regarding cell
characterization.


**ModelGauge m5 Algorithm Output Registers**


The following registers are outputs from the ModelGauge m5 algorithm. The values in these registers become valid
351ms after the IC is configured.


**RepCap Register (05h)**


Register Type: Capacity


RepCap or reported remaining capacity in mAh. The ModelGauge m5 algorithm prevents remaining capacity from making
a sudden jump during load change conditions.


www.maximintegrated.com Maxim Integrated | 20


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**RepSOC Register (06h)**


Register Type: Percentage


RepSOC is the reported state-of-charge percentage output for use by the application GUI.


**FullCapRep Register (10h)**


Register Type: Capacity


This register reports the full capacity that goes with RepCap, generally used for reporting to the user. A new full-capacity
value is calculated at the end of every charge cycle in the application.


**TTE Register (11h)**


Register Type: Time


The TTE register holds the estimated time to empty for the application under present temperature and load conditions.
TTE register is only valid when current register is negative.


**TTF Register (20h)**


Register Type: Time


The TTF register holds the estimated time to full for the application under present conditions. The TTF value is
determined by learning the constant current and constant voltage portions of the charge cycle based on experience of
prior charge cycles. Time-to-full is then estimated by comparing the present charge current to the charge termination
current. Operation of the TTF register assumes all charge profiles are consistent in the application. The TTF register is
only valid when the current register is positive.


**Cycles Register (17h)**


Register Type: Special


The Cycles register maintains a total count of the number of charge/discharge cycles of the cell. The result is stored
as a fraction of a full cycle. For example, a full charge/discharge cycle results in the Cycles register incrementing by
100%. The Cycles register accumulates fractional or whole cycles. For example, if a battery is cycled 10% x 10 times,
then it is equivalent to 100% of one cycle. The Cycles register has a full range of 0 to 655.35 cycles with a 1% LSb.


**Status Register (00h)**


Register Type: Special


Initial Value: 0x8082


The Status register maintains all flags related to alert thresholds and battery insertion or removal. Table 7 shows the
Status register format.


**Table 7. Status (00h) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|Br|Smx|Tmx|Vmx|Bi|Smn|Tmn|Vmn|dSOCi|Imx|X|X|Bst|Imn|POR|X|



**POR (Power-On Reset):** This bit is set to 1 when the device detects that a software or hardware POR event has
occurred. This bit must be cleared by system software to detect the next POR event. POR is set to 1 at power-up.


**Imn and Imx (Minimum/Maximum Current-Alert Threshold Exceeded):** These bits are set to 1 whenever a Current
register reading is below (Imn) or above (Imx) the IAlrtTh thresholds. These bits may or may not need to be cleared by
system software to detect the next event. See Config.IS bit description. Imn and Imx are cleared to 0 at power-up.


**Vmn and Vmx (Minimum/Maximum Voltage-Alert Threshold Exceeded):** These bits are set to 1 whenever a VCell


www.maximintegrated.com Maxim Integrated | 21


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

register reading is below (Vmn) or above (Vmx) the VAlrtTh thresholds. These bits may or may not need to be cleared by
system software to detect the next event. See Config.VS bit description. Vmn and Vmx are cleared to 0 at power-up.


**Tmn and Tmx (Minimum/Maximum Temperature-Alert Threshold Exceeded):** These bits are set to 1 whenever a
Temperature register reading is below (Tmn) or above (Tmx) the TAlrtTh thresholds. These bits may or may not need to
be cleared by system software to detect the next event. See Config.TS bit description. Tmn and Tmx are cleared to 0 at

power-up.


**Smn and Smx (Minimum/Maximum SOC-Alert Threshold Exceeded):** These bits are set to 1 whenever SOC is below
(Smn) or above (Smx) the SAlrtTh thresholds. These bits may or may not need to be cleared by system software to
detect the next event. See Config.SS description. Smn and Smx are cleared to 0 at power-up.


**Bst (Battery Status):** Useful when the IC is used in a host-side application. This bit is set to 0 when a battery is present
in the system, and set to 1 when the battery is absent. Bst is set to 0 at power-up.


**dSOCi (State-of-Charge 1% Change Alert):** This is set to 1 whenever the RepSOC register crosses an integer
percentage boundary such as 50.0%, 51.0%, etc. Must be cleared by host software. dSOCi is set to 1 at power-up.


**Bi (Battery Insertion):** Useful when the IC is used in a host-side application. This bit is set to 1 when the device detects
that a battery has been inserted into the system by monitoring the TH pin. This bit must be cleared by system software
to detect the next insertion event. Bi is set to 0 at power-up.


**Br (Battery Removal):** Useful when the IC is used in a host-side application. This bit is set to 1 when the system detects
that a battery has been removed from the system. This bit must be cleared by system software to detect the next removal
event. Br is set to 1 at power-up.


**X (Don’t Care):** This bit is undefined and can be logic 0 or 1.


**Analog Measurements**


The IC monitors voltage, current, and temperature. This information is provided to the fuel guage algorithm to predict cell
capacity and also made available to the user.


**Voltage Measurement**


**VCell Register (09h)**
Register Type: Voltage


VCell register reports the 2.5X the voltage measured at the CELLX pin. This represents the voltage per cell of the battery
pack.


**AvgVCell Register (19h)**


Register Type: Voltage


The AvgVCell register reports an average of the VCell register readings.


**MaxMinVolt Register (1Bh)**


Register Type: Special


Initial Value: 0x00FF


The MaxMinVolt register maintains the maximum and minimum of VCell register values since device reset. At power-up,
the maximum voltage value is set to 00h (the minimum) and the minimum voltage value is set to FFh (the maximum).
Therefore, both values are changed to the voltage register reading after the first update. Host software can reset this
register by writing it to its power-up value of 0x00FF. The maximum and minimum voltages are each stored as 8-bit
values with a 20mV resolution. Table 8 shows the register format.


www.maximintegrated.com Maxim Integrated | 22


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Table 8. MaxMinVolt (1Bh) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|MaxVCELL|MaxVCELL|MaxVCELL|MaxVCELL|MaxVCELL|MaxVCELL|MaxVCELL|MaxVCELL|MinVCELL|MinVCELL|MinVCELL|MinVCELL|MinVCELL|MinVCELL|MinVCELL|MinVCELL|



**MaxVCELL:** Maximum VCell register reading


**MinVCELL:** Minimum VCell register reading


**Current Measurement**


The IC monitors the current flow through the battery by measuring the voltage across the current-sensing element over
a ±51.2mV range. The IC is precalibrated for current-measurement accuracy in Maxim's factory.


Additionally, the IC maintains a record of the minimum and maximum current measured by the IC and an average current.


See the _Layout Guidelines_ section for the recommended board layout to minimize current-sense error.


**Current Register (0Ah)**


Register Type: Current


The IC measures the voltage across the sense resistor, and the result is stored as a two’s complement value in the
Current register. Voltages outside the minimum and maximum register values are reported as the minimum or maximum
value. The register value should be divided by the sense resistance to convert to amperes. The value of the sense resistor
determines the resolution and the full-scale range of the current readings. Table 9 shows range and resolution values
for typical sense resistances. This is for rechargeable applications. Non-rechargeable applications with long run-times
should generally use higher sense resistor value.


**Table 9. Current Measurement Range and Resolution vs. Sense Resistor Value**













|BATTERY FULL<br>CAPACITY (mAh)|SENSE<br>RESISTOR (mΩ)|CURRENT REGISTER<br>RESOLUTION (μA)|CURRENT REGISTER<br>RANGE (A)|CAPACITY<br>RESOLUTION (mAh)|
|---|---|---|---|---|
|> 4000|1|1562.5|± 51.2|5|
|> 2000|2|781.25|± 25.6|2.5|
|> 800|5|312.5|± 10.24|1|
|> 400|10|156.25|± 5.12|0.5|
|> 200|20|78.125|± 2.56|0.25|
|> 80|50|31.25|± 1.024|0.1|


**AvgCurrent Register (0Bh)**


Register Type: Current


The AvgCurrent register reports an average of Current register readings.


**MaxMinCurr Register (1Ch)**


Register Type: Special


Initial Value: 0x807F


The MaxMinCurr register maintains the maximum and minimum Current register values since the last IC reset or until
cleared by host software. At power-up, the maximum current value is set to 80h (most negative) and the minimum current
value is set to 7Fh (most positive). Therefore, both values are changed to the Current register reading after the first
update. Host software can reset this register by writing it to its power-up value of 0x807F. The maximum and minimum


www.maximintegrated.com Maxim Integrated | 23


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

currents are each stored as two’s complement 8-bit values with (0.4mV) / Rsense resolution. Table 10 shows the register
format.


**Table 10. MaxMinCurr (1Ch) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|MaxCurrent|MaxCurrent|MaxCurrent|MaxCurrent|MaxCurrent|MaxCurrent|MaxCurrent|MaxCurrent|MinCurrent|MinCurrent|MinCurrent|MinCurrent|MinCurrent|MinCurrent|MinCurrent|MinCurrent|



**MaxCurrent:** Maximum Current register reading


**MinCurrent:** Minimum Current register reading


**Temperature Measurement**


The IC can be configured to measure its own internal die temperature or an external NTC thermistor.


Set Config.TSEL = 0 (default) to enable die temperature measurement. Set Config.TSEL = 1 to enable thermistor
measurement.


Thermistor conversions are initiated by periodically connecting the TH and BATT pins internally. Measurement results of
TH pin are compared to the voltage of the BATT pin and converted to a ratiometric value from 0% to 100%. The active
pullup is disabled when temperature measurements are complete. This reduces the current consumption.


The ratiometric results are converted to temperature using the temperature gain (TGain), temperature offset (TOff), and
temperature curve (Curve) register values. Internal die temperature measurements are factory calibrated and are not
affected by TGain, TOff, and Curve register settings. Refer to the _[User Guide 6597: MAX1726x ModelGauge m5 EZ](https://www.maximintegrated.com/en/app-notes/index.mvp/id/6597)_
_[User Guide](https://www.maximintegrated.com/en/app-notes/index.mvp/id/6597)_ for more details. Additionally, the IC maintains a record of the minimum and maximum temperature measured
and an average temperature.


**Temp Register (08h)**


Register Type: Temperature


The Temp register provides the temperature measured by the thermistor or die temperature based on the Config register
setting.


**AvgTA Register (16h)**


Register Type: Temperature


The AvgTA register reports an average of the readings from the Temp register.


**MaxMinTemp Register (1Ah)**


Register Type: Special


Initial Value: 0x807F


The MaxMinTemp register maintains the maximum and minimum Temp register (08h) values since the last fuel-gauge
reset or until cleared by host software. At power-up, the maximum value is set to 0x80 (most negative) and the minimum
value is set to 0x7F (most positive). Therefore, both values are changed to the Temp register reading after the first
update. Host software can reset this register by writing it to its power-up value of 0x807F. The maximum and minimum
temperatures are each stored as two’s complement 8-bit values with 1°C resolution. Table 11 shows the format of the
register.


**Table 11. MaxMinTemp (1Ah) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|MaxTemperature|MaxTemperature|MaxTemperature|MaxTemperature|MaxTemperature|MaxTemperature|MaxTemperature|MaxTemperature|MinTemperature|MinTemperature|MinTemperature|MinTemperature|MinTemperature|MinTemperature|MinTemperature|MinTemperature|



www.maximintegrated.com Maxim Integrated | 24


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**MaxTemperature:** Maximum Temp register reading


**MinTemperature:** Minimum Temp register reading


**DieTemp Register (034h)**


Register Type: Temperature


The DieTemp register provides the internal die temperature measurement. If Config.TSel = 0, DieTemp and Temp
registers have the value of the die temperature.


**Power Register (B1h)**
Instant power calculation from immediate current and voltage. The LSB is (8μV [2] ) / Rsense.


**AvgPower Register (B3h)**
Filtered average power from the Power register. The LSB is (8μV [2] ) / Rsense.


**Alert Function**


The Alert Threshold registers allow interrupts to be generated by detecting a high or low voltage, current, temperature,
or state-of-charge. Interrupts are generated on the ALRT pin open-drain output driver. An external pullup is required to
generate a logic-high signal. Alerts can be triggered by any of the following conditions:


- Battery removal: (V AIN - V THRM – V DET ) and battery removal detection enabled (Ber = 1).


- Battery insertion: (V AIN < V THRM – V DET-HYS ) and battery insertion detection enabled (Bei = 1).


- Over/undervoltage: VAlrtTr register threshold violation (upper or lower) and alerts enabled (Aen = 1).


- Over/undertemperature: TAlrtTr register threshold violation (upper or lower) and alerts enabled (Aen = 1).


- Over/undercurrent: IAlrtTr register threshold violation (upper or lower) and alerts enabled (Aen = 1).


- Over/under SOC: SAlrtTr register threshold violation (upper or lower) and alerts enabled (Aen = 1).


- 1% SOC change: RepSOC register bit d8 (1% bit) changed (dSOCen = 1).


To prevent false interrupts, the threshold registers should be initialized before setting the Aen bit. Alerts generated
by battery insertion or removal can only be reset by clearing the corresponding bit in the Status (00h) register. Alerts
generated by a threshold-level violation can be configured to be cleared only by software, or cleared automatically when
the threshold level is no longer violated. See the Config (1Dh) and Config2 (BBh) register descriptions for details of the
alert function configuration.


**VAlrtTh Register (01h)**


Register Type: Special


Initial Value: 0xFF00 (Disabled)


The VAlrtTh register shown in Table 12 sets upper and lower limits that generate an alert if exceeded by the VCell register
value. The upper 8 bits set the maximum value and the lower 8 bits set the minimum value. Interrupt threshold limits are
selectable with 20mV resolution over the full operating range of the VCell register.


**Table 12. VAlrtTh (01h) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|VMAX|VMAX|VMAX|VMAX|VMAX|VMAX|VMAX|VMAX|VMIN|VMIN|VMIN|VMIN|VMIN|VMIN|VMIN|VMIN|



**VMAX:** Maximum voltage reading. An alert is generated if the VCell register reading exceeds this value.


www.maximintegrated.com Maxim Integrated | 25


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**VMIN:** Minimum voltage reading. An alert is generated if the VCell register reading falls below this value.


**TAlrtTh Register (02h)**


Register Type: Special


Initial Value: 0x7F80 (Disabled)


The TAlrtTh register (Table 13) sets upper and lower limits that generate an alert if exceeded by the Temp register value.
The upper 8 bits set the maximum value and the lower 8 bits set the minimum value. Interrupt threshold limits are stored
in 2’s-complement format with 1°C resolution over the full operating range of the Temp register.


**Table 13. TAlrtTh (02h) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|TMAX|TMAX|TMAX|TMAX|TMAX|TMAX|TMAX|TMAX|TMIN|TMIN|TMIN|TMIN|TMIN|TMIN|TMIN|TMIN|



**TMAX:** Maximum temperature reading. An alert is generated if the Temp register reading exceeds this value.


**TMIN:** Minimum temperature reading. An alert is generated if the Temp register reading falls below this value.


**SAlrtTh Register (03h)**


Register Type: Special


Initial Value: 0xFF00 (Disabled)


The SAlrtTh register shown (Table 14) sets upper and lower limits that generate an alert if exceeded by RepSOC. The
upper 8 bits set the maximum value and the lower 8 bits set the minimum value. Interrupt threshold limits are configurable
with 1% resolution over the full operating range of the RepSOC register.


**Table 14. SAlrtTh (03h) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|SMAX|SMAX|SMAX|SMAX|SMAX|SMAX|SMAX|SMAX|SMIN|SMIN|SMIN|SMIN|SMIN|SMIN|SMIN|SMIN|



**SMAX:** Maximum state-of-charge threshold. An alert is generated if the RepSOC register exceeds this value.


**SMIN:** Minimum state-of-charge threshold. An alert is generated if the RepSOC register falls below this value.


**IAlrtTh Register (B4h)**


Register Type: Special


Initial Value: 0x7F80 (Disabled)


The IAlrtTh register (Table 15) sets upper and lower limits that generate an alert if exceeded by the Current register
value. The upper 8 bits set the maximum value and the lower 8 bits set the minimum value. Interrupt threshold limits are
selectable with 0.4mV/R SENSE resolution over the full operating range of the Current register.


**Table 15. IAlrtTh (B4h) Format**

|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|IMAX|IMAX|IMAX|IMAX|IMAX|IMAX|IMAX|IMAX|IMIN|IMIN|IMIN|IMIN|IMIN|IMIN|IMIN|IMIN|



**IMAX:** Maximum current reading. An alert is generated if the current register reading exceeds this value.


**IMIN:** Maximum current reading. An alert is generated if the current register reading falls below this value.


www.maximintegrated.com Maxim Integrated | 26


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Serial Number Feature**

Each IC provides a unique serial number ID. To read this serial number, clear the AtRateEn and the DPEn
bit in the Config2 register. The 128-bit serial information overwrites the Dynamic Power and AtRate output
registers. To continue Dynamic Power and AtRate operations after reading the serial number, the host should set
Config2.AtRateEn and Config2.DPEn to 1.


**Table 16. Serial Number Format**

|ADDRESS|Config2.AtRateEn = 1 || Config2.DPEn = 1|Config2.AtRateEn = 0 && Config2.DPEn = 0|
|---|---|---|
|0xD4|MaxPeakPower|Serial Number Word0|
|0xD5|SusPeakPower|Serial Number Word1|
|0xD9|MPPCurrent|Serial Number Word2|
|0xDA|SPPCurrent|Serial Number Word3|
|0xDC|AtQResidual|Serial Number Word4|
|0xDD|AtTTE|Serial Number Word5|
|0xDE|AtAvSoc|Serial Number Word6|
|0xDF|AtAvCap|Serial Number Word7|



**ModelGauge m5 Memory Space**


Registers that relate to functionality of the ModelGauge m5 fuel gauge are located on pages 0h-4h and are
continued on pages Bh and Dh. See the _ModelGauge m5 EZ Algorithm_ section for details of specific register
operation. Register locations marked reserved should not be written to.


**Table 17. ModelGauge m5 Register Memory Map**

|PAGE/<br>WORD|00h|10h|20h|30h|40h|B0h|D0h|
|---|---|---|---|---|---|---|---|
|0h|Status|FullCapRep|TTF|Reserved|Reserved|Status2|RSense /<br>UserMem3|
|1h|VAlrtTh|TTE|DevName|Reserved|Reserved|Power|ScOcvLim|
|2h|TAlrtTh|QRTable00|QRTable10|QRTable20|QRTable30|ID /<br>UserMem2|VGain|
|3h|SAlrtTh|FullSocThr|FullCapNom|Reserved|RGain|AvgPower|SOCHold|
|4h|AtRate|RCell|Reserved|DieTemp|Reserved|IAlrtTh|MaxPeakPower|
|5h|RepCap|Reserved|Reserved|FullCap|dQAcc|TTFCfg|SusPeakPower|
|6h|RepSOC|AvgTA|Reserved|Reserved|dPAcc|CVMixCap|PackResistance|
|7h|Age|Cycles|AIN|Reserved|Reserved|CVHalfTime|SysResistance|
|8h|Temp|DesignCap|LearnCfg|RComp0|Reserved|CGTempCo|MinSysVoltage|
|9h|VCell|AvgVCell|FilterCfg|TempCo|ConvgCfg|Curve|MPPCurrent|
|Ah|Current|MaxMinTemp|RelaxCfg|VEmpty|VFRemCap|HibCfg|SPPCurrent|
|Bh|AvgCurrent|MaxMinVolt|MiscCfg|Reserved|Reserved|Config2|ModelCfg|



www.maximintegrated.com Maxim Integrated | 27


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Table 17. ModelGauge m5 Register Memory Map (continued)**

|PAGE/<br>WORD|00h|10h|20h|30h|40h|B0h|D0h|
|---|---|---|---|---|---|---|---|
|Ch|QResidual|MaxMinCurr|TGain|Reserved|Reserved|VRipple|AtQResidual|
|Dh|MixSOC|Config|TOff|FStat|QH|RippleCfg|AtTTE|
|Eh|AvSOC|IChgTerm|CGain|Timer|Reserved|TimerH|AtAvSOC|
|Fh|MixCap|AvCap|COff|ShdnTimer|Reserved|Reserved|AtAvCap|



**Layout Guidelines**


Proper circuit layout as shown in Figure 3 is essential for voltage, temperature, and current-measurement accuracy. The
recommended layout guidelines are as follows:


- CSN and GND traces should make Kelvin connections to the sense resistor. Current is measured differentially through

the CSN and GND pins. Any shared high current paths on these traces affect current-measurement accuracy.

- For TDFN package designs, connect EP directly to the GND pin.

- REG capacitor trace loop area should be minimized. REG should be connected to the GND pin as close as possible

to the IC. Run only a single GND trace to the sense resistor. This helps filter any noise from the internal regulated
supply.

- All other ground connections should be kept separate from the current sensing traces.

  - The Kelvin lines should not be shared with other circuits.

  - Vias on the Kelvin traces are not recommended.


- There are no limitations on any other IC connection. Other IC pins, as well as any external components mounted to

these pins, have no special layout requirements.


www.maximintegrated.com Maxim Integrated | 28


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ





































_Figure 3. MAX17261 Layout Guide_


www.maximintegrated.com Maxim Integrated | 29


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Typical Application Circuits**


Figure 4 shows a typical operating circuit for low-side current sensing. A sense resistor is typically used. Alternatively, a PCB trace
can be used for high-current or small-form-factor applications. For better measurement, place the sensing element as close as
possible to the CSN and GND pin. The IC automatically compensates for the effect of environmental temperature and trace heating

on trace resistance.


Figure 5 shows a typical application circuit for multiple-series cells. An external 3V to 5V regulator is required to provide regulated
output within BATT pin supply range. Multiple-series-cells measurement requires external voltage divider circuit. The resistor divider
should be configured so that 40% of one-cell voltage is measured at analog measurement pin CELLX. As it is configured in Figure 5,
the resistor divider ratio is R2/R1 = 5/2 x (N-1) + 3/2, where R2 is the resistance between CELLX pin and the battery pack positive
terminal, R1 is the resistance between the CELLX pin and the GND pin, and N is the number of cells. For additional power savings, in
trade-off with BOM cost, add a N-channel MOSFET as shown in Figure 5. The gate of the FET is controlled by the SW pin. The SW
pin only turns on the resistor divider for a short period of time every time ADC measurement occurs. Higher resistance value for the
divider circuit degrades the accuracy of analog measurement, while lower resistance causes more power consumption. The
suggested R1 value is 200kΩ. Typical consumption without NMOS is 8μA. For the accuracy of the voltage measurement, use 0.1%
resistors.











































_Figure 4. Low-Side Current Measurement Typical Applications Circuit_


www.maximintegrated.com Maxim Integrated | 30


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Typical Application Circuits (continued)**




















|(TDFN Only)<br>N<br>1MΩ|Col2|SW|
|---|---|---|
|N<br>1MΩ<br>(TDFN Only)|||















_Figure 5. Multiple-Series Battery Typical Applications Circuit_


**Ordering Information**

|PART NUMBER|TEMP. RANGE|DESCRIPTION|PIN-PACKAGE|
|---|---|---|---|
|MAX17261MEWL+|-40°C to +85°C|Multi-Cell Fuel Gauge with ModelGauge m5 EZ|9-WLP|
|MAX17261MEWL+T|-40°C to +85°C|Multi-Cell Fuel Gauge with ModelGauge m5 EZ|9-WLP|
|MAX17261METD+|-40°C to +85°C|Multi-Cell Fuel Gauge with ModelGauge m5 EZ|14-TDFN-EP*|
|MAX17261METD+T|-40°C to +85°C|Multi-Cell Fuel Gauge with ModelGauge m5 EZ|14-TDFN-EP*|



_+Denotes a lead(Pb)-free/RoHS-compliant package._


_T = Tape-and-reel._


_*EP = Exposed Pad._


www.maximintegrated.com Maxim Integrated | 31


# MAX17261 5.1μA Multi-Cell Fuel Gauge with ModelGauge m5 EZ

**Revision History**







|REVISION<br>NUMBER|REVISION<br>DATE|DESCRIPTION|PAGES<br>CHANGED|
|---|---|---|---|
|0|5/18|Initial release|—|


For pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642, or visit Maxim Integrated’s website at www.maximintegrated.com.


_Maxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent_
_licenses are implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and max_
_limits) shown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance._


Maxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc. © 2018 Maxim Integrated Products, Inc.


